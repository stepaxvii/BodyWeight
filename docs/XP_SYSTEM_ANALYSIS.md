# –ü–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Å–∏—Å—Ç–µ–º—ã XP

**–î–∞—Ç–∞**: 01.01.2026  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

---

## üìä –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã XP

### Backend (–ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã)

#### 1. –†–∞—Å—á—ë—Ç XP –¥–ª—è —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è (`backend/app/services/xp_calculator.py`)

```python
def calculate_xp(
    base_xp: int,
    difficulty: int,
    reps: int,  # –û–ë–©–ï–ï –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π –¥–ª—è –≤—Å–µ–≥–æ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è
    streak_days: int,
    is_first_today: bool,
) -> int:
    XP = base_xp √ó difficulty_mult √ó streak_mult √ó volume_mult √ó first_bonus
```

**–§–æ—Ä–º—É–ª–∞:**
- `difficulty_mult = 1 + (difficulty - 1) √ó 0.25` (1.0, 1.25, 1.5, 1.75, 2.0)
- `streak_mult = 1 + min(streak_days, 30) √ó 0.0167` (–¥–æ √ó1.5)
- `volume_mult = 1 + reps √ó 0.02` (–µ—Å–ª–∏ reps ‚â§ 20, –¥–æ √ó1.4)
- `volume_mult = 1.4 + (reps - 20) √ó 0.01` (–µ—Å–ª–∏ reps > 20)
- `first_bonus = 1.2` (–ø–µ—Ä–≤–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –¥–Ω—è) –∏–ª–∏ `1.0`

#### 2. –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ (`backend/app/services/workout_processor.py`)

**–ö–ª—é—á–µ–≤–∞—è –ª–æ–≥–∏–∫–∞:**
```python
# –î–ª—è –∫–∞–∂–¥–æ–≥–æ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è:
total_value = sum(ex_data.sets)  # –°—É–º–º–∏—Ä—É–µ–º –í–°–ï –ø–æ–¥—Ö–æ–¥—ã
xp_value = total_value  # (–∏–ª–∏ total_duration // 10 –¥–ª—è timed)

# –°—á–∏—Ç–∞–µ–º XP –û–î–ò–ù –†–ê–ó –¥–ª—è –≤—Å–µ–≥–æ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è
xp_earned = calculate_xp(
    base_xp=exercise.base_xp,
    difficulty=exercise.difficulty,
    reps=xp_value,  # –û–ë–©–ê–Ø —Å—É–º–º–∞ –≤—Å–µ—Ö –ø–æ–¥—Ö–æ–¥–æ–≤
    streak_days=user.current_streak,
    is_first_today=is_first_today,
)
```

**–í–∞–∂–Ω–æ:** XP —Å—á–∏—Ç–∞–µ—Ç—Å—è –¥–ª—è –≤—Å–µ–≥–æ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è —Ü–µ–ª–∏–∫–æ–º, –∞ –Ω–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞ –æ—Ç–¥–µ–ª—å–Ω–æ!

---

### Frontend (–¢–æ–ª—å–∫–æ –¥–ª—è –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞)

#### –†–∞—Å—á—ë—Ç –ø—Ä–∏–º–µ—Ä–Ω–æ–≥–æ XP (`frontend/mini-app/src/routes/workout/+page.svelte`)

**–õ–æ–≥–∏–∫–∞ –¥–æ–ª–∂–Ω–∞ —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å backend:**
1. –°—É–º–º–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –ø–æ–¥—Ö–æ–¥—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è
2. –ü—Ä–∏–º–µ–Ω–∏—Ç—å volume multiplier –∫ –æ–±—â–µ–π —Å—É–º–º–µ
3. –°—á–∏—Ç–∞—Ç—å XP –æ–¥–∏–Ω —Ä–∞–∑ –¥–ª—è –≤—Å–µ–≥–æ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è

**–ë–µ–∑ —É—á–µ—Ç–∞:**
- ‚ùå Streak multiplier (–Ω–µ–∏–∑–≤–µ—Å—Ç–µ–Ω –Ω–∞ frontend)
- ‚ùå First workout bonus (–Ω–µ–∏–∑–≤–µ—Å—Ç–µ–Ω –Ω–∞ frontend)

---

## üîç –ü—Ä–æ–±–ª–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –Ω–∞–π–¥–µ–Ω—ã –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã

### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ 1: –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ª–æ–≥–∏–∫–∏ —Ä–∞—Å—á—ë—Ç–∞

**–ë—ã–ª–æ:**
- Frontend —Å—á–∏—Ç–∞–ª XP –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞ –æ—Ç–¥–µ–ª—å–Ω–æ
- Backend —Å—á–∏—Ç–∞–ª XP –¥–ª—è –≤—Å–µ–≥–æ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è —Ü–µ–ª–∏–∫–æ–º

**–°—Ç–∞–ª–æ:**
- Frontend —Ç–µ–ø–µ—Ä—å —Å—É–º–º–∏—Ä—É–µ—Ç –≤—Å–µ –ø–æ–¥—Ö–æ–¥—ã –∏ —Å—á–∏—Ç–∞–µ—Ç XP –æ–¥–∏–Ω —Ä–∞–∑ (–∫–∞–∫ backend)

### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ 2: XP –ø–æ–∫–∞–∑—ã–≤–∞–ª—Å—è –±–µ–∑ –ø–æ–¥—Ö–æ–¥–æ–≤

**–ë—ã–ª–æ:**
- XP –º–æ–≥ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å—Å—è –¥–∞–∂–µ –∫–æ–≥–¥–∞ `totalSets === 0`

**–°—Ç–∞–ª–æ:**
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞: –µ—Å–ª–∏ `totalSets === 0`, XP = 0

### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ 3: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ timed —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π

**–ë—ã–ª–æ:**
- –ù–µ –≤—Å–µ–≥–¥–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–ª–∏—Å—å —Å–µ–∫—É–Ω–¥—ã –≤ "rep equivalent"

**–°—Ç–∞–ª–æ:**
- –î–ª—è timed: `totalSeconds / 10` = rep equivalent (–∫–∞–∫ –Ω–∞ backend)

---

## ‚úÖ –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã

### Backend

1. **–†–∞—Å—á—ë—Ç XP** (`xp_calculator.py`):
   - ‚úÖ –§–æ—Ä–º—É–ª–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è
   - ‚úÖ –í—Å–µ –º–Ω–æ–∂–∏—Ç–µ–ª–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
   - ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ timed —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π (10 —Å–µ–∫ = 1 rep)

2. **–û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏** (`workout_processor.py`):
   - ‚úÖ –°—É–º–º–∏—Ä—É–µ—Ç –≤—Å–µ –ø–æ–¥—Ö–æ–¥—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è
   - ‚úÖ –°—á–∏—Ç–∞–µ—Ç XP –æ–¥–∏–Ω —Ä–∞–∑ –¥–ª—è –≤—Å–µ–≥–æ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è
   - ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç timed —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è
   - ‚úÖ –û–±–Ω–æ–≤–ª—è–µ—Ç user.total_xp –∏ user.level
   - ‚úÖ –ù–∞—á–∏—Å–ª—è–µ—Ç –º–æ–Ω–µ—Ç—ã
   - ‚úÖ –û–±–Ω–æ–≤–ª—è–µ—Ç streak
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç achievements
   - ‚úÖ –û–±–Ω–æ–≤–ª—è–µ—Ç goals

### Frontend

1. **–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä XP** (`workout/+page.svelte`):
   - ‚úÖ –°—É–º–º–∏—Ä—É–µ—Ç –≤—Å–µ –ø–æ–¥—Ö–æ–¥—ã (–∫–∞–∫ backend)
   - ‚úÖ –°—á–∏—Ç–∞–µ—Ç XP –æ–¥–∏–Ω —Ä–∞–∑ –¥–ª—è –≤—Å–µ–≥–æ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è
   - ‚úÖ –ù–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç XP –µ—Å–ª–∏ –Ω–µ—Ç –ø–æ–¥—Ö–æ–¥–æ–≤
   - ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç timed —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è
   - ‚ö†Ô∏è –ë–µ–∑ streak –∏ first bonus (—Ç–æ–ª—å–∫–æ –¥–ª—è –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞)

2. **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ XP**:
   - ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç "‚Äî" –µ—Å–ª–∏ –Ω–µ—Ç –ø–æ–¥—Ö–æ–¥–æ–≤
   - ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç "~XP" –≤–æ –≤—Ä–µ–º—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ (–ø—Ä–∏–º–µ—Ä–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ)
   - ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ—á–Ω–æ–µ XP –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è (–∏–∑ backend)

---

## üìù –ü—Ä–∏–º–µ—Ä—ã —Ä–∞—Å—á—ë—Ç–∞

### –ü—Ä–∏–º–µ—Ä 1: L-—Å–∏–¥–µ–Ω–∏–µ, 3 –ø–æ–¥—Ö–æ–¥–∞ –ø–æ 30 –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π

**Backend:**
```
total_value = 30 + 30 + 30 = 90 –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π
volume_mult = 1.4 + (90 - 20) √ó 0.01 = 1.4 + 0.7 = 2.1
XP = base_xp √ó difficulty_mult √ó streak_mult √ó 2.1 √ó first_bonus
```

**Frontend (–ø—Ä–∏–º–µ—Ä–Ω–æ, –±–µ–∑ streak/first):**
```
total_value = 90 –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π
volume_mult = 2.1
XP ‚âà base_xp √ó difficulty_mult √ó 2.1
```

### –ü—Ä–∏–º–µ—Ä 2: –ü–ª–∞–Ω–∫–∞, 2 –ø–æ–¥—Ö–æ–¥–∞ –ø–æ 60 —Å–µ–∫—É–Ω–¥

**Backend:**
```
total_duration = 60 + 60 = 120 —Å–µ–∫—É–Ω–¥
xp_value = 120 / 10 = 12 rep equivalent
volume_mult = 1 + 12 √ó 0.02 = 1.24
XP = base_xp √ó difficulty_mult √ó streak_mult √ó 1.24 √ó first_bonus
```

**Frontend:**
```
total_duration = 120 —Å–µ–∫—É–Ω–¥
xp_value = 12 rep equivalent
volume_mult = 1.24
XP ‚âà base_xp √ó difficulty_mult √ó 1.24
```

---

## üéØ –í—ã–≤–æ–¥—ã

### ‚úÖ –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ

1. **Backend** - –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ XP
2. **Frontend** - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–∏–º–µ—Ä–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞
3. **–õ–æ–≥–∏–∫–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∞** - frontend —Å—É–º–º–∏—Ä—É–µ—Ç –ø–æ–¥—Ö–æ–¥—ã –∏ —Å—á–∏—Ç–∞–µ—Ç –æ–¥–∏–Ω —Ä–∞–∑ (–∫–∞–∫ backend)
4. **Volume multiplier** –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫ –æ–±—â–µ–π —Å—É–º–º–µ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π (–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ)

### ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

1. **Diminishing returns**: –ö–∞–∂–¥—ã–π –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –¥–∞—ë—Ç –º–µ–Ω—å—à–µ XP –∏–∑-–∑–∞ volume multiplier
   - –≠—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ! –°–∏—Å—Ç–µ–º–∞ –ø–æ–æ—â—Ä—è–µ—Ç —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ –æ–±—ä—ë–º

2. **Frontend vs Backend**: Frontend –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–∏–º–µ—Ä–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –±–µ–∑ streak –∏ first bonus
   - –¢–æ—á–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤—Å–µ–≥–¥–∞ –ø—Ä–∏—Ö–æ–¥–∏—Ç —Å backend –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏

3. **Timed —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è**: 10 —Å–µ–∫—É–Ω–¥ = 1 –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç
   - –≠—Ç–æ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–æ –º–µ–∂–¥—É frontend –∏ backend

---

## üîß –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. ‚úÖ –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
2. ‚úÖ –õ–æ–≥–∏–∫–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∞ –º–µ–∂–¥—É frontend –∏ backend
3. ‚úÖ –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ –º–µ—Å—Ç–µ
4. ‚ö†Ô∏è –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –≤ UI, —á—Ç–æ —ç—Ç–æ –ø—Ä–∏–º–µ—Ä–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ

**–ò—Ç–æ–≥:** –°–∏—Å—Ç–µ–º–∞ XP —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∞ –º–µ–∂–¥—É frontend –∏ backend.

